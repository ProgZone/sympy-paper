
\subsubsection{Expression manipulation}

% symbols, various ways to declare them

All symbols in SymPy must be instantiated and assigned to a variable before
they can be used. This is typically done through the \texttt{symbols}
function, which creates multiple symbols at once. For instance,

\begin{verbatim}
>>> x, y, z = symbols('x y z')
\end{verbatim}

creates three symbols named \texttt{x}, \texttt{y}, and \texttt{z}, assigned
to Python variables of the same name. The Python variable names that symbols
are assigned to are immaterial---we could have just as well have written
\verb|a, b, c = symbol('x y z')|.

Expressions are created from symbols using Python syntax, which mirrors usual
mathematical notation. Note that in Python, exponentiation is \verb|**|.

\begin{verbatim}
>>> (x**2 - 2*x + 3)/y
(x**2 - 2*x + 3)/y
\end{verbatim}

% polynomial expressions

% functions

% expand( ), factor( ), collect( ), together( ), apart( )
%% maybe a table best suits this part.

% simplification: simplify, sqrt denest, fu, trigsimp

The generic way to simplify an expression is by calling the \texttt{simplify}
function.
It must be emphasized that simplification is not an unambigously defined
mathematical operation~\cite{Carette2004understanding}.
The \texttt{simplify} function applies several simplification routines along
with some heuristics to make the output expression as ``simple'' as possible.

It is often preferable to apply more directed simplification functions. These
apply very specific rules to the input expression, and are often able to make
guarantees about the output (for instance, the \texttt{factor} function, given
a polynomial with rational coefficients in several variables, is guaranteed to
produce a factorization into irreducible factors).
Table~\ref{simplify-table} lists some common simplification functions.

% TODO: add a simple example for each
% TODO: fix the formatting
\label{simplify-table}
\begin{tabular}{l|p{0.7\linewidth}}
expand & expand the expression \\
factor & factor a polynomial into irreducibles \\
collect & collect polynomial coefficients \\
cancel & rewrite a rational function as $p/q$ with common factors canceled \\
apart & compute the partial fraction decomposition of a rational function \\
trigsimp & simplify trigonometric expressions~\cite{fu2006automated} \\
\end{tabular}

Substitutions are performed through the \texttt{.subs} method, which is
sensible to some mathematical properties while matching, such as
associativity, commutativity, additive and multiplicative inverses, and
matching of powers.

%% TODO: add examples

\subsubsection{Calculus}

% Calculus (differentiation, integration, limits). Note that algorithm
% descriptions will go in the algorithms section.

Derivations can be computed with the \verb|diff| function,
or using the method with the same name on the expressions:

\begin{verbatim}
In [1]: diff(sin(x), x)
Out[1]: cos(x)

In [2]: sin(x).diff(x)
Out[2]: cos(x)
\end{verbatim}

The class \verb|Derivative| is a container for unevaluated derivatives

\begin{verbatim}
In [3]: expr = Derivative(sin(x), x)

In [4]: expr
Out[4]:
d
--(sin(x))
dx
\end{verbatim}

To evaluate such a held expression, simply call the \verb|doit| method:

\begin{verbatim}
In [5]: expr.doit()
Out[5]: cos(x)
\end{verbatim}

Integrals can be analogously calculated either with the \verb|integrate| function
or with the method with the same name on expressions:
\begin{verbatim}
>>> integrate(sin(x), x)
-cos(x)
\end{verbatim}
This expression returns an expression whose derivative is the original expression.
Notice that integrals are defined up to an integration constant,
for the sake of simplicity SymPy will not display the full generic expression.

Definite integration can be calculated with the same method, by specifying a
range of the integration variable:
\begin{verbatim}
>>> integrate(sin(x), (x, 0, 1))
-cos(1) + 1
\end{verbatim}

To express unevaluated integrals, the class \verb|Integral| may help
\begin{verbatim}
Integral(sin(x), x)
\end{verbatim}
as in the case of derivatives, the method \verb|doit| will cause such an expression
to be evaluated.

Limits:
\begin{verbatim}
In [9]: limit(sin(x)/x, x, 0)
Out[9]: 1
\end{verbatim}
for unevaluated expressions, \verb|Limit|.

TODO: right and left limits.

Sums and products are handled by the \texttt{Sum} and \texttt{Product} classes,
respectively.
Analogously with \texttt{Integral}, the first argument is the expression to be
summed over, whereas the following arguments represent the summation and
multiplication indices, respectively, provided with integer ranges.

It may be noted the existence of the \texttt{IndexedBase} class,
which provides the construction of indexed symbols, that is symbols that are
treated as different if their indices are different.


\subsubsection{Expression outputs}

Alongside with its parsers, SymPy has a rich collection of expression printers.

% LaTeX printer
Expressions may be readily transformed into a LaTeX form with the \texttt{latex( )}
function.

% pretty printer
Pretty printer outputs the expression in traditional form with characters,
outputs can be visualized in monospace fonts.
